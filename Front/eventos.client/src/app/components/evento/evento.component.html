<app-titulo [titulo]="'Evento'"></app-titulo>



<!-- Filtro como botão -->
<div class="d-flex justify-content-left mb-4">
    <div class="input-group" style="max-width: 400px;">
        <div class="input-group-prepend">
            <span class="input-group-text bg-secondary text-white" id="filtro-label" style="border-radius: 3px;">
                Filtro:
            </span>
        </div>
        <input type="text" class="form-control"
               placeholder="Buscar"
               aria-label="Filtro"
               [(ngModel)]="filtroLista"
               style="border-radius: 3;">
    </div>
</div>

<table class="table table-striped table-hover">
    <thead class="table-dark text-center">
        <tr>
            <th>
                <button type="button" class="btn btn-outline-light btn-sm"
                        (click)="alterarImagem()">
                    <i class="{{exibirImagem1 ? 'fa fa-eye' : 'fa fa-eye-slash'}}"></i>
                    {{exibirImagem1 ? 'Exibir' : 'Ocultar' }}
                </button>
            </th>
            <th>#</th>
            <th>Nome</th>
            <th>Local</th>
            <th>Data/Hora Evento</th>
            <th>Tema</th>
            <th>Pessoas</th>
            <th>Lote</th>
            <th colspan="2">Opções</th>
        </tr>
    </thead>
    <tbody *ngIf="eventos && eventos.length">
        <tr *ngFor="let evento of eventosFiltrados" class="text-center align-middle">
            <td>
                <img [collapse]="exibirImagem1"
                     [isAnimated]="true"
                     src="/assets/images/{{evento.imagemURL}}"
                     class="img-fluid rounded"
                     style="width: 120px; height: 70px; object-fit: fill">
            </td>
            <td>{{evento.id}}</td>
            <td>{{evento.nome}}</td>
            <td>{{evento.local}}</td>
            <td>{{evento.dataEvento | date:'dd/MM/yyyy - HH:mm' }}</td>
            <td>{{evento.tema}}</td>
            <td>{{evento.qtdPessoas}}</td>
            <td>{{evento.lotes[0].nome}}</td>
            <td>
                <button type="button" class="btn btn-primary btn-sm" tooltip="Editar">
                    <i class="fa fa-edit"></i>
                </button>
            </td>
            <td>
                <button type="button" class="btn btn-danger btn-sm"
                tooltip="Excluir"
                (click)="openModal(template)">
                    <i class="fa fa-trash"></i>
                </button>
            </td>
        </tr>
    </tbody>
    <tfoot *ngIf="!eventos.length">
        <tr>
            <td colspan="10" class="text-center"><h5>Nenhum Registro encontrado</h5></td>
        </tr>
    </tfoot>
</table>

<hr class="my-4">

<div class="form-group d-flex justify-content-center mb-4">
    <button class="btn btn-outline-dark btn-sm"
            (click)="ChangeImage()">
        <i class="{{exibirImagem2 ? 'fa fa-eye' : 'fa fa-eye-slash'}}"></i>
        {{ exibirImagem2 ? 'Exibir' : 'Ocultar' }}
    </button>
</div>

<div class="row row-cols-1 row-cols-md-3 g-4">
    <div class="col" *ngFor="let eventos of eventosFiltrados">
        <div class="card h-100 shadow-sm" style="border:0.5px solid black; border-radius:5px">
            <div *ngIf="eventos.imagemURL">
                <img src="/assets/images/{{eventos.imagemURL}}"
                     class="card-img-top"
                     alt="Imagem do Evento"
                     style="height: 250px; object-fit: fill;border:0.5px solid black;"
                     [collapse]="exibirImagem2"
                     [isAnimated]="true">
            </div>
            <div class="card-body" style="border:0.5px solid black">
                <h5 class="card-title"><b>{{eventos.nome}}</b></h5>
                <p>Evento ID: {{eventos.id}}</p>
                <p>Local: {{eventos.local}}</p>
                <p>Pessoas: {{eventos.qtdPessoas}}</p>
                <p>Lote: {{eventos.lotes[0].nome}}</p>
                <p>
                    <b>Data e Horário:</b>
                    <small class="text-muted">{{eventos.dataEvento | date:'dd/MM/yyyy - HH:mm:ss' }}</small>
                </p>
            </div>
            <div class="card-footer text-center" style="border:0.5px solid black">
                <button type="button" class="btn btn-secondary" >Inscrever</button>
            </div>
        </div>
    </div>
</div>




<ng-template #template>
    <div class="modal-body text-center">
        <p>Tem certeza que deseja excluir o Evento?</p>
        <button type="button" class="btn btn-default" (click)="confirm()">Sim</button>
        <button type="button" class="btn btn-primary" (click)="decline()">Não</button>
    </div>
</ng-template>
